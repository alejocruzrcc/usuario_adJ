<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>5. Configuracioń y uso de algunos programas</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="up" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="prev" href="configuracion-de-componentes-basicos.html" title="4. Configuración y uso de programas y servicios básicos"><link rel="next" href="conf-dispositivos.html" title="6. Configuración y uso de algunos dispositivos y servicios"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">5. Configuracioń y uso de algunos programas</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="configuracion-de-componentes-basicos.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="conf-dispositivos.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf-programas"></a>5. Configuracioń y uso de algunos programas</h2></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="escritorio"></a>5.1. Escritorio y Archivos</h3></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="fluxbox"></a>5.1.1. FluxBox</h4></div></div></div><p>
        La operación básica de este liviano y estético administrador de
        ventanas se describe en ???,
        aquí describimos algunos detalles de configuración.
      </p><p>
        Para emplearlo como administrador de ventanas por defecto debe
        modificarse <code class="literal">~/.xsession</code>, así como en
        <code class="literal">~/.xinitrc</code> y agregar al final:
      </p><pre class="programlisting">
    if (test -x /usr/local/bin/startfluxbox) then {
        /usr/local/bin/startfluxbox
    } fi; 
</pre><p>
        Una vez en operación podrá realizar diversas configuraciones
        oprimiendo el botón derecho sobre el escritorio en el menú
        <code class="literal">fluxbox menu</code>. Por ejemplo podrá cambiar
        estilos en <code class="literal">System Styles</code> y esconder/mostrar
        la barra de herramientas con
        <code class="literal">Configure -&gt; Toolbar -&gt; Visible</code> FluxBox
      </p><div class="figure"><a name="idp2892680880"></a><p class="title"><b>Figura 14. </b></p><div class="mediaobject"><img src="img/fluxbox-xfig.png"></div></div><p>
        Entre sus características:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Es altamente configurable (recursos, menús, decoración de
            ventanas y estilos).
          </p></li><li><p>
            Es muy liviano, requiere alrededor de 4MB en RAM.
          </p></li><li><p>
            Con Alt+[Boton izquierdo] permite cambiar ubicación de la
            ventana sobre la que está el curso, y con Alt+[Botono
            derecho] el tamaño.
          </p></li></ul></div><p>
        El menú que presenta se configura en un archivo texto con una
        sintaxis sencilla, puede cambiarse editando en
        <code class="literal">~/.fluxbox/menu</code>.
      </p><p>
        Los programas que se inician con el escritorio pueden
        configurarse en <code class="literal">~/.fluxbox/startup</code>. Por
        ejemplo en este archivo puede configurar el locale que usará
        agregando o cambiando la línea:
      </p><pre class="programlisting">
export LANG=es_CO.UTF-8
    
</pre><p>
        La apariencia en general puede configurarse en
        <code class="literal">~/.fluxbox/init</code>
      </p><p>
        Puede configurar teclas rápidas en el archivo
        <code class="literal">~/.fluxbox/keys</code>
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="lecturas-conf-fluxbox"></a>5.1.1.1. Lecturas recomendadas</h5></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
              Sitio oficial <a href="fluxbox.org" target="_top">fluxbox.org</a>.
            </p></li><li><p>
              Página sobre fluxbox de NetBSD
              <a href="http://wiki.netbsd.org/fluxbox/" target="_top">http://wiki.netbsd.org/fluxbox/</a>
            </p></li><li><p>
              Página sobre fluxbox de Gentoo
              <a href="http://www.gentoo.org/doc/es/fluxbox-config.xml" target="_top">http://www.gentoo.org/doc/es/fluxbox-config.xml</a>
            </p></li></ul></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="xfe"></a>5.1.2. <code class="literal">xfe</code></h4></div></div></div><p>
        La operación básica se describe en
        <a href="">basico_adJ</a>, aquí describimos
        algunos detalles de configuración.
      </p><p>
        El archivo de configuración se ubica en
        <code class="literal">~/.config/xfe/xferc</code>. La mayoría de
        posibilidades se configuran desde Editar &gt; Preferencias, sin
        embargo para que opere bien Herramientas &gt; Ventana
        superusuario nueva en adJ el archivo de configuración en la
        sección <code class="literal">OPTIONS</code> debe incluir:
      </p><pre class="programlisting">
uso_sudo=1
sudo_nopasswd=1
</pre></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="espiritualidad"></a>5.2. Espiritualidad</h3></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="xiphos"></a>5.2.1. <code class="literal">xiphos</code></h4></div></div></div><p>
        Como se describe en <a href="">xiphosmanual</a>,
        es una herramienta gráfica de estudio e investigación bíblica
        que se basa en las librerías del proyecto Sword.
      </p><div class="figure"><a name="idp359618096"></a><p class="title"><b>Figura 15. </b></p><div class="mediaobject"><img src="img/xiphos.png"></div></div><p>
        Puede iniciarla desde el menu de fluxbox
        Espiritualidad-&gt;Xiphos o desde una terminal con
        <code class="literal">xiphos</code>. Deben instalarse módulos primero.
        Cada módulo puede ser una traducción, comentario, diccionario.
        Hay traducciones a muchos idiomas (incluyendo manuscritos
        griegos y hebreo). En español entre otras se encuentra parte de
        la traducción de dominio público de los evangelios que
        típicamente se ha incluido con adJ.
      </p><p>
        Una vez instale los módulos que desea usar, es posible ver
        varias traducciones en paralelo. Cada traducción puede contar
        con opciones como: Palabras de Cristo en Rojo, Números Strong,
        Etiquetas morfológicas, Notas al pie, encabezados.
      </p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="documentos"></a>5.3. Preparación de Documentos y Aplicaciones de Oficina</h3></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="msoffice"></a>5.3.1. Aplicaciones estilo MS-Office</h4></div></div></div><p>
        LibreOffice es un juego de aplicaciones de oficina que ofrece,
        prácticamente, la misma funcionalidad de MS-Office, un formato
        de documentos estándar (ISO) y facilidades para importar y
        exportar en formatos de MS-Office.
      </p><div class="figure"><a name="idm590032208"></a><p class="title"><b>Figura 16. </b></p><div class="mediaobject"><img src="img/gnumeric.png"></div></div><p>
        Lo puede iniciar desde el escritorio con botón derecho Oficina
        &gt; LibreOffice o bien desde una terminal con
      </p><pre class="programlisting">
    soffice
          
</pre><p>
        Después de instalarlo y ejecutarlo por primera vez arrancará en
        inglés, para configurarlo en español vaya al menú Tools &gt;
        Options &gt; Language y elija Español y Español/Colombia en las
        casillas de idioma que aparecen al lado derecho.
      </p><p>
        Incluye el procesador de texto <code class="literal">writer</code> (que
        puede iniciar desde una terminal con
        <code class="literal">swriter</code>), la hoja de cálculo
        <code class="literal">calc</code> (que inicia desde una terminal con
        <code class="literal">scalc</code>), el creador de presentaciones
        <code class="literal">impress</code> (que inicia con
        <code class="literal">simpress</code> desde un terminal) y el programa
        para diagrama <code class="literal">draw</code> (que puede iniciar con
        <code class="literal">sdraw</code>). Puede aprender más sobre este
        procesador en ???
      </p><p>
        Además el DVD de adJ incluye abiword-3.0.1p7 como procesador de
        texto capaz de abrir y escribir tanto en el formato de Microsoft
        Office como en OpenDocument (que es el formato de LibreOffice y
        OpenOffice).
      </p><p>
        Para operar con hojas de cálculo incluye gnumeric-1.12.34, que
        también puede abrir y guardar en OpenDocument y en formatos de
        Microsoft Office.
      </p><p>
        La funcionalidad de un procesador de palabra, así como la básica
        para hacer presentaciones también las ofrece LaTeX (ver
        <a href="conf-programas.html#latex" title="5.3.2.1. LaTeX">Sección 5.3.2.1, “LaTeX”</a>). Parte de la funcionalidad de
        una hoja de cálculo la tiene desde una terminal
        <code class="literal">sc</code>. También puede usar
        <code class="literal">magicpoint</code> para hacer presentaciones. Sin
        embargo para usar estas herramientas se requiere aprender formas
        diferentes de operar.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="conf-tex-gv"></a>5.3.2. TeX y Ghostview</h4></div></div></div><p>
        Para emplear TeX, LaTeX y asociados instale texlive y gv:
      </p><pre class="programlisting">
    doas pkg_add $PKG_PATH/&amp;p-texlive_base;.tgz 
    doas pkg_add $PKG_PATH/&amp;p-texlive_texmf-full;.tgz 
    doas pkg_add $PKG_PATH/gv-3.7.4.tgz 
</pre><p>
        Puede configurar tamaño del papel, separado en sílabas y otros
        detalles con <code class="literal">texconfig</code>.
      </p><p>
        A continuación se incluye un mini-tutorial de LaTeX adaptado de
        AALinux, por otra parte puede consultar algo más sobre
        <code class="literal">gv</code> en la sección
        <a href="conf-dispositivos.html#uso-impresora" title="6.2.1. Uso de una impresora ya configurada">Sección 6.2.1, “Uso de una impresora ya configurada”</a>.
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="latex"></a>5.3.2.1. LaTeX</h5></div></div></div><p>
          LaTeX es una extensión a un sistema llamado TeX, desarrollado
          para escribir documentos de matemáticas. A continuación se
          presenta un ejemplo de un documento LaTeX y el resultado que
          se obtiene tras procesarlo.
        </p><pre class="programlisting">
\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\begin{document}
\author{Rupertino Gonzales}
\title{Algunas posibilidades de LaTeX}
\maketitle

\section{Elementos}
Puede estructurar el documento en capítulos, secciones, etc.
Este texto es el contenido de la primera sección de este ejemplo, 
puede escribir cada párrafo en líneas consecutivas.

\subsection{Ayudas}
Puede lograr efectos como \emph{Itálicas}, \textbf{negrillas} o 
cambios en el \textsf{tipo o {\small tamaño} de letra} (note 
como se anidaron ambientes en este ejemplo).

Puede crear listas:
\begin{itemize}
\item Primer elemento de lista.
\item Segundo elemento de lista.
\end{itemize}
o tablas
\\
\begin{tabular}{|l|r|} \hline
Título 1 &amp; Título 2 \\\hline
elemento 1 &amp; elemento 2 \\\hline
\end{tabular}
\subsection{Ecuaciones}
LaTeX es un experto en esta materia:
\[ \int_{x=-\infty}^{\infty}e^{-|x|} \]
\end{document}
</pre><p>
          LaTeX ofrece plantillas para varios tipos de documentos:
          artículo, reporte, libro y ofrece el concepto de ambiente para
          indicar como presentar cierta información de acuerdo a la
          plantilla. En el ejemplo presentado, el tipo de documento es
          artículo (lo indica la línea
          <code class="literal">documentclass{article}</code>), y uno de los
          ambientes empleados es <code class="literal">tabular</code>, que genera
          una tabla.
        </p><p>
          Una vez edite un documento puede procesarlo con LaTeX para
          obtener un archivo DVI, por ejemplo para generar el archivo
          <code class="literal">documento.dvi</code> a partir de
          <code class="literal">documento.tex</code>:
        </p><pre class="programlisting">
    latex documento.tex
</pre><p>
          latex Programa que convierte un archivo LaTeX a DVI.
        </p><p>
          xdvi Programa para ver un archivo DVI en pantalla.
        </p><p>
          El archivo DVI es apropiado para imprimir, puede imprimirlo
          con un comando como <code class="literal">dvilj</code>,
          <code class="literal">dvidj</code> o un nombre análogo que corresponda a
          su impresora <sup>[<a name="idp2753706800" href="#ftn.idp2753706800">10</a>]</sup>. Para visualizar un archivo DVI puede emplear el
          comando xdvi:
        </p><pre class="programlisting">
    xdvi documento.dvi
</pre><p>
          dvi2ps Programa para convertir un DVI en PostScript.
        </p><p>
          y para convertirlo a PostScript puede emplear
          <code class="literal">dvi2ps</code>:
        </p><pre class="programlisting">
    dvi2ps -c documento.ps documento.dvi
</pre><p>
          A continuación se presenta como se ve el ejemplo de esta
          sección con el programa <code class="literal">xdvi</code>.
        </p><div class="figure"><a name="idp2753708720"></a><p class="title"><b>Figura 17. Visualización de DVI generado de fuente en
          LaTeX</b></p><div class="mediaobject"><img src="img/ejlatex.png" alt="Visualización de DVI generado de fuente
            en LaTeX"></div></div><p>
          Existen además otros programas para convertir de LaTeX a HTML
          como latex2html y HeVeA. Puede encontrar más información de
          latex2html en
          <a href="http://ctan.tug.org/ctan/tex-archive/support/latex2html/" target="_top">http://ctan.tug.org/ctan/tex-archive/support/latex2html/</a>
          y de HeVeA en
          <a href="http://pauillac.inria.fr/hevea/" target="_top">http://pauillac.inria.fr/hevea/</a>.
        </p></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="docbook"></a>5.3.3. DocBook</h4></div></div></div><p>
        Puede configurarse tanto DocBook SGML 4.4 y procesarse con las
        hojas de estilo DSSSL, o bien DocBook XML 4.4 y procesarse con
        <code class="literal">xsltproc</code>.
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="sgml-4-4-con-dsssl"></a>5.3.3.1. SGML 4.4 con DSSSL</h5></div></div></div><p>
          Instale los paquetes openjade, docbook y docbook-dsssl:
        </p><pre class="programlisting">
        doas pkg_add $PKG_PATH/docbook-4.5p1.tgz
        doas pkg_add $PKG_PATH/docbook-dsssl-1.79.tgz
        doas pkg_add $PKG_PATH/openjade-1.3.3pre1p2.tgz 
</pre><p>
          Esto bastará para hacer conversiones de DocBook SGML a HTML
          por ejemplo si su hoja de estílo DSSL es
          "marcos.dsl" y va a convertir el documento DocBook
          marcos.xml:
        </p><pre class="programlisting">
        openjade  -t sgml -ihtml -d marcos.dsl#html marcos.xml 
</pre><p>
          Para convertir a PostScript además de los paquetes anteriores
          requiere el paquete texlive (ver
          <a href="conf-programas.html#conf-tex-gv" title="5.3.2. TeX y Ghostview">TeX y Ghostview</a>) y el
          paquete jadetex
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="xml-4-4-con-xsl"></a>5.3.3.2. XML 4.4 con XSL</h5></div></div></div><p>
          Cómo parte del paquete
          `<code class="literal">se instalará el DTD de DocBook XML 4.4 en el directorio</code>/usr/local/share/xml/docbook<code class="literal">. Es recomendable que cree el archivo</code>/usr/local/share/xml/catalog`
          inicialmente con:
        </p><pre class="programlisting">
        CATALOG "docbook/catalog" 
</pre><p>
          y que agregue en este archivo la ruta de otros catálogos XML o
          de DTDs.
        </p><p>
          Para transformar documentos XML con hojas de estilo XSL puede
          emplear un procesador como <code class="literal">xsltproc</code>, que
          está incluido en el paquete <code class="literal">libxslt</code>. Esta
          herramienta recibe el nombre del archivo XSL y el nombre del
          archivo XML por transformar. También puede recibir la opción
          <code class="literal">--catalogs</code> que indica usar los catálogos de
          la variable <code class="literal">SGML_CATALOG_FILES</code> (se separan
          unos catálogos de otros con el carácter ':'), o la opción
          <code class="literal">--nonet</code> que indica no descargar DTDs de
          Internet (los catálogos deben resolver todos los
          identificadores públicos).
        </p><p>
          Las hojas de estilo XSL para transformar DocBook XML en HTML y
          en XML-FO (Formatting objects, apropiado para imprimir con un
          procesador FO) se instalan con el paquete
          `<code class="literal">y quedan en</code>/usr/local/share/xsl/docbook`.
        </p><p>
          Una vez instalados todas las partes puede procesar el archivo
          <code class="literal">ejemplo.xdbk</code>:
        </p><pre class="programlisting">
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"  "/usr/local/share/xml/docbook/4.4/docbookx.dtd" &gt; 
</pre><pre class="programlisting">
&lt;article lang="es"&gt;
    &lt;title&gt;articulo&lt;/title&gt;
  &lt;articleinfo&gt;
    &lt;authorgroup&gt;
      &lt;author&gt;
    &lt;firstname&gt;Nombres&lt;/firstname&gt;
    &lt;surname&gt;Apellidos&lt;/surname&gt;
    &lt;authorblurb&gt;
          &lt;para&gt;&lt;address&gt;
          &lt;email&gt;micorreo@pasosdeJesus.org&lt;/email&gt;
           &lt;/address&gt;&lt;/para&gt;
    &lt;/authorblurb&gt;
      &lt;/author&gt; 
    &lt;/authorgroup&gt;
    
    &lt;abstract&gt;
        &lt;para&gt;Resumen&lt;/para&gt;
    &lt;/abstract&gt;

    &lt;legalnotice&gt;
        &lt;para&gt;nota legal&lt;/para&gt;
    &lt;/legalnotice&gt;

  &lt;/articleinfo&gt;

  &lt;sect1 id="s1"&gt;
    &lt;title&gt;Primera sección&lt;/title&gt;

    &lt;para&gt;Parrafo&lt;/para&gt;
  &lt;/sect1&gt;
&lt;/article&gt;
</pre><pre class="programlisting">

con una hoja XSLT de DocBook con:
</pre><pre class="programlisting">
    export SGML_CATALOG_FILES="/usr/local/share/xml/catalog"
    xsltproc --catalogs --nonet /usr/local/share/xsl/docbook/html/chunk.xsl ejemplo.xdbk
</pre><pre class="programlisting">

## Español {#espanol}

### ispell

`ispell` permite revisar ortografía de textos planos o fuentes de
documentos en diversos formatos (HTML, XML o TeX). Hay diccionarios
disponibles para diversos idiomas. Al instalar el paquete `ispell` se
instalarán dos diccionarios: inglés de EUA (`american`) e inglés de
Inglaterra (`british`). Para emplear el diccionario en español
(`spanish`) instale el paquete `ispell-spanish`, puede configurarlo como
diccionario por defecto con `ispell-config`.

#### Corrección ortográfica {#correccion-ortográfica}

Puede corregir interactivamente la ortografía de un texto plano (digamos
`carta.txt`) usando el diccionario por defecto con:
</pre><pre class="programlisting">
    ispell carta.txt
</pre><pre class="programlisting">
                

o si desea emplear el diccionario de un idioma particular:
</pre><pre class="programlisting">
    ispell -d spanish carta.txt
</pre><pre class="programlisting">
                

Al corregir interactivamente `ispell` mostrará palabras que no encuentre
en el diccionario del idioma ni en su diccionario personal[^corr.1] del
idioma (e.g. `~/.ispell_spanish`), así como posibles remplazos. Podrá
elegir uno de los remplazos tecleando el número que antecede al
remplazo.

[^corr.1]: Puede cambiar el diccionario personal que `ispell` debe emplear
    con la opción `-p archivo`

## Multimedia {#multimedia}

### Mplayer

Es un reproductor de audio y video que soporta gran variedad de
formatos. Por ejemplo para ver video.flv:
</pre><pre class="programlisting">
    mplayer video.flv
</pre><pre class="programlisting">
              

Se distribuye con codecs que pueden distribuirse libremente. Para que
soporte codecs de Windows es importante instalar también el paquete
`win32-codecs`

También permite hacer conversiones y extraer partes. Por ejemplo para
extraer pista de audio de un video descargado de youtube, y dejarla en
formato WAV:
</pre><pre class="programlisting">
    mplayer -vo null -ao "pcm:file=pista.wav" -af resample=44100 "video.flv"
</pre><pre class="programlisting">

        

Para reproducir 10 segundos de un DVD comenzando en el segundo 240:
</pre><pre class="programlisting">
    mplayer -ss 240 -endpos 10 dvd://1
</pre><pre class="programlisting">
        

Se distribuye junto con `mencoder` que permite convertir de un formato a
otro.

### Edición de gráficos {#ediciongraficos}

Para ver una gráfica (sin editarla) prácticamente en cualquier formato,
puede usar `display` incluido en ImageMagick-6.9.8.3:
</pre><pre class="programlisting">
display migrafica.png
</pre><pre class="programlisting">
              

Otra opción que facilita ver un directorio con imagenes es `xfi`
incluido en el paquete xfe-1.42p0:
</pre><pre class="programlisting">
xfi migrafica.png
</pre><pre class="programlisting">
              

Las operaciones típicas con gráficos son el retoque de fotos y la
creación de diagramas. Para retocar fotografías se emplean editores
gráficos a nivel de pixels, mientras que para creación de diagramas
resultan más convenientes editores de gráficos vectoriales.

Como editor de gráficos a nivel de pixels, el CD de adJ incluye gimp-2.8.18p4

![](img/gimp.png)

Como editor vectorial incluye inkscape-0.92.1

![](img/inkscape.png)

OpenOffice incluye otro editor vectorial llamado `draw`.

Para la generación de gráficos de barras y estadísticos resulta más
apropiado el graficador de gnumeric-1.12.34 o de calc --la hoja de cálculo de
OpenOffice--, ver [xref](#msoffice)


### Edición de audio {#edicionaudio}

Para reproducir una pista de audio en diversos formatos (incluyendo el
libre ogg, el común wav y el patentado mp3) puede usar `mplayer` (ver
[xref](#mplayer)), o bien `audacious` (incluido en el paquete
audacious-3.5.2p0):

![](img/audacious.png)

 El programa `play` incluido en el paquete sox-14.4.2p2 también le
permitirá escuchar diversos formatos.

Desde la línea de comandos podrá recortar, cambiar volumen y aplicar
otros efectos empleando el programa `sox`.

Si prefiere un editor gráfico que le permite recortar y aplicar algunos
efectos a pistas de audio en prácticamente cualquier formato de audio
utilice el programa audacity-1.3.9p8:

![](img/audacity.png)

## Operación en red {#operación-en-red}

### `mutt`

El uso básico de mutt puede consultarlo en [xref](#basico_adJ).

#### Enviado correo con `sendmail` de otro computador {#otro-smtp}

Para enviar correos `mutt` corre por defecto el programa `sendmail` (por
defecto con parámetros: `sendmail -oem -oi`), si usted prefiere o
necesita emplear el `sendmail` de otro computador puede:

-   Hacer un script (digamos `/home/EUSUARIO/scripts/envia.sh`) que
    llame al `sendmail` remoto (por ejemplo con `ssh`) y le pase lo que
    recibe por entrada estándar:
</pre><pre class="programlisting">
    #!/bin/sh
    # envia.sh Dominio público

    if (test "$SSH_AUTH_SOCK" = "") then {
        echo "Usar con ssh-agent";
        exit 2;
    } fi;

    cat - | ssh EUSUARIO@ECLIENTE /usr/sbin/sendmail -oem -oi
</pre><pre class="programlisting">

    Note que este script está hecho para ser ejecutado junto con el
    agente de autenticación de ssh (i.e `ssh-agent`).

-   Configure `mutt` para que emplee su script con la variable
    `sendmail`, la cual puede establecer en su archivo `~/.muttrc` con
    algo como:
</pre><pre class="programlisting">
        set sendmail=/home/EUSUARIO/scripts/envia.sh
</pre><pre class="programlisting">


-   Asegurese de ejecutar `mutt` junto con el agente de autenticación de
    `ssh`. Por ejemplo con:
</pre><pre class="programlisting">
        ssh-agent /bin/ksh
        ssh-add
        mutt
</pre><pre class="programlisting">
                            

    o si emplea XWindow es posible que pueda configurar su manejador de
    escritorio o su administrador de ventanas para que toda la sesión
    emplee el agente (ver un ejemplo en [xref](#fluxbox)).

#### Lecturas recomendadas {#lecturas-mutt}

-   Página man de `mutt`

-   Sección sobre `mutt` de basico_adJ.


### Chromium

Puede iniciarlo desde el menú de fluxbox o desde una terminal con
`chromium`.

Es posible que chrome use como proxy un tunel SOCKS creado con ssh. Esto
es útil por ejemplo para ingresar a sitios web que están en intranets.
Primero cree el tunel ingresando al cortafuegos/enrutador de la
Intranet, por ejemplo en el puerto 9080 con:
</pre><pre class="programlisting">
ssh -D9080 miusuario@micortafuegos 
</pre><pre class="programlisting">
              

A continuación inicie chromium indicando que debe usarse el proxy socks
del puerto 9080:
</pre><pre class="programlisting">
chromium --proxy-server=socks://127.0.0.1:9080
</pre><pre class="programlisting">
              

Tras esto ya podrá ingresar direcciones de la intranet desde el
navegador.

## Ambiente de Desarrollo {#ambiente-de-desarrollo}

### Ruby

En adJ 6.1 es sencillo usar ruby-2.3.3 con Ruby on Rails 5. 
Lo básico se instala de paquetes de OpenBSD y lo más reciente de Ruby 
directamente como gemas.

#### Instalación y configuración

Asegúrese de tener instalados los paquetes ruby-2.3.3 y node-6.10.1,
incluidos en el DVD de adJ 6.1

Asegúrese de tener enlaces al interprete de ruby y herramientas (como
describe el paquete ruby):
</pre><pre class="programlisting">
doas sh
ln -sf /usr/local/bin/ruby24 /usr/local/bin/ruby
ln -sf /usr/local/bin/erb24 /usr/local/bin/erb
ln -sf /usr/local/bin/irb24 /usr/local/bin/irb
ln -sf /usr/local/bin/rdoc24 /usr/local/bin/rdoc
ln -sf /usr/local/bin/ri24 /usr/local/bin/ri
ln -sf /usr/local/bin/rake24 /usr/local/bin/rake
ln -sf /usr/local/bin/gem24 /usr/local/bin/gem
</pre><pre class="programlisting">
                  

##### Límites amplios

Asegurarse de tener limites amplios del sistema operativo para abrir
archivos y manejar memoria, por ejemplo superiores a los siguientes en
`/etc/systctl.conf`
</pre><pre class="programlisting">
kern.shminfo.shmmni=1024
kern.seminfo.semmns=2048
kern.shminfo.shmmax=50331648
kern.shminfo.shmall=51200
kern.maxfiles=20000
</pre><pre class="programlisting">

El usuario desde el cual desarrollará o ejecutará aplicaciones también
debe tener límites amplios, en particular su clase de login (por ejemplo
`staff`). Debe tener al menos los siguientes en `/etc/login.conf`
</pre><pre class="programlisting">
staff:\
        :datasize-cur=1536M:\
        :datasize-max=infinity:\
        :maxproc-max=4096:\
        :maxproc-cur=4096:\
        :openfiles-max=8090:\
        :openfiles-cur=8090:\
        :ignorenologin:\
        :requirehome@:\
        :tc=default:
</pre><pre class="programlisting">

(Si modifica el archivo `/etc/login.conf` debe reconstruir su versión
binaria con `doas cap_mkdb /etc/login.conf`).


##### irb

Para facilitar su exploración del lenguaje ruby, puede usar `irb` (ver
{4}), pero antes verifique que su archivo `~/.irbrc` tenga las
siguientes líneas (añadidas por defecto en adJ a la cuenta de
administrador):
</pre><pre class="programlisting">
# Configuración de irb
# Basado en archivo de comandos disponible en &lt;http://girliemangalo.wordpress.com/2009/02/20/using-irbrc-file-to-configure-your-irb/&gt;
require 'irb/completion'
require 'pp'
IRB.conf[:AUTO_INDENT] = true
IRB.conf[:USE_READLINE] = true

def clear
    system('clear')
end
</pre><pre class="programlisting">

A continuación ingrese a `irb` y escriba por ejemplo `4.` y presione la
tecla \[Tab\] 2 veces para ver los métodos de la clase Integer.

##### Gemas

El paquete `ruby` incluye `rubygems` que maneja gemas (es decir
librerías) con el programa `gem`. Puede actualizar a la versión más
reciente las gemas globales con:
</pre><pre class="programlisting">
doas gem update --system
QMAKE=qmake-qt5 make=gmake MAKE=gmake doas gem pristine --all
</pre><pre class="programlisting">

Para facilitar compilación de algunas extensiones (como las de nokogiri) se recomienda instalar globalmente:
</pre><pre class="programlisting">
doas gem install pkg-config 
</pre><pre class="programlisting">

El directorio donde se instalan las gemas globales es ```/usr/local/lib/ruby/gems/2.4/```
donde sólo pueden instalarse con ```doas```. 
Recomendamos iniciar un directorio para instalar gemas como usuario normal 
en  ```/var/www/bundler/ruby/2.4```, por 3 razones (1) evitar riesgos de 
seguridad al instalar gemas como root, (2) evitar problemas de permisos 
y la dificultad de programas como bundler para usar ```doas``` en lugar 
de ```sudo``` y (3) alistar infraestructura para que sus aplicaciones 
corran en una jaula chroot en ```/var/www```

Prepare ese directorio con:
</pre><pre class="programlisting">
doas mkdir -p /var/www/bundler/ruby/2.4/
doas chown -R $USER:www /var/www/bundler
</pre><pre class="programlisting">

Y cuando requiera instalar una gema allí emplee:
</pre><pre class="programlisting">
gem install --install-dir /var/www/bundler/ruby/2.4/ json -v '2.0'
</pre><pre class="programlisting">

O si llega a tener problemas de permisos con:
</pre><pre class="programlisting">
doas gem install --install-dir /var/www/bundler/ruby/2.4/ bcrypt -v '3.1.11'
</pre><pre class="programlisting">

##### Bundler

Para facilitar el manejo de varias gemas (y sus interdependencias) en un 
proyecto es típico emplear ```bundler``` que instala con:
</pre><pre class="programlisting">
doas gem install bundler
if (test -x /usr/lcoal/bin/bundle24) then { doas ln -sf /usr/local/bin/bundle24 /usr/local/bin/bundle; } fi
</pre><pre class="programlisting">

Configurelo para que instale gemas localmente en ```/var/www/bundler/ruby/2.4``` con:
</pre><pre class="programlisting">
bundler config path /var/www/bundler/ruby/2.4
</pre><p>
          ```
        </p><p>
          Puede experimentar descargando un proyecto para ruby ya hecho,
          seguramente verá un archivo <code class="literal">Gemfile</code>, donde
          <code class="literal">bundler</code> examina de que librerías depende la
          aplicación y genera un archivo <code class="literal">Gemfile.lock</code>
          con las versiones precisas por instalar de cada gema.
        </p><p>
          Una vez tenga un proyecto asegure que este emplea las gemas de
          <code class="literal">/var/www/bundler/ruby/2.4</code> ejecutando dentro
          del directorio del proyecto:
        </p><pre class="programlisting">
    mkdir .bundle
    cat &gt; .bundle/config &lt;&lt;EOF
    ---
    BUNDLE_PATH: "/var/www/bundler"
    BUNDLE_DISABLE_SHARED_GEMS: "true"
    EOF
</pre><p>
          E instale con
        </p><pre class="programlisting">
    bundle install
</pre><p>
          Si eventualmente no logra instalar algunas --por problemas de
          permisos tipicamente-- puede instalar con
        </p><pre class="programlisting">
    doas gem install --install-dir /var/www/bundler/ruby/2.4 json -v '2.0'
</pre><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="rails"></a>5.3.3.2.1. Rails</h6></div></div></div><p>
            Se trata de una popular gema que facilita mucho la creación
            de sitios dinámicos.
          </p><p>
            Para instalarla globalmente (en
            <code class="literal">/usr/local/bin</code> y
            <code class="literal">/usr/local/lib/ruby/gems/</code>) la versión
            estable más reciente de Rails (5.1.2 en el momento de este
            escrito), ejecute
          </p><pre class="programlisting">
    doas gem install rails
</pre><p>
            Rails requiere en el servidor un interprete de JavaScript,
            por lo que recomendamos <code class="literal">node.js</code> (ver {1})
            incluido en el DVD de adJ 6.1 y que se configurará
            automáticamente.
          </p><p>
            La gran mayoría de gemas usadas por rails instalarán de la
            misma forma que se explicó. Algunos casos especiales son:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <code class="literal">nokogiri</code> que puede requerir
              </p><pre class="programlisting">
    doas gem install --install-dir /var/www/bundler/ruby/2.4/ nokogiri -- --use-system-libraries 
</pre></li><li><p>
                <code class="literal">capybara-webkit</code> que podría requerir
              </p><pre class="programlisting">
    QMAKE=qmake-qt5 MAKE=gmake doas gem install capybara-webkit
</pre></li></ul></div></div><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="coffescript"></a>5.3.3.2.2. Coffescript</h6></div></div></div><p>
            Si su aplicación rails emplea coffescript necesitará un
            programa que pueda ejecutar javascript al lado del servidor,
            recomendamos node.js incluido en adJ. Actualice a la versión
            más reciente de npm con:
          </p><pre class="programlisting">
    doas npm install npm -g
</pre><p>
            Instale coffeescript con:
          </p><pre class="programlisting">
    doas npm install -g coffee-script
</pre></div><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="editor-vim"></a>5.3.3.2.3. Editor vim</h6></div></div></div><p>
            Para emplear <code class="literal">vim</code> como editor se
            recomienda asegurarse de haber ejecutado:
          </p><pre class="programlisting">
    cd ~
    mkdir -p .vim
    cd .vim
    cp -rf /usr/local/share/vim/vim74/* .
</pre><p>
            y si no tiene archivo ~/.vimrc ejecutar:
          </p><pre class="programlisting">
    cp /usr/local/share/vim/vim74/vimrc_example.vi ~/.vimrc
</pre><p>
            asi como agregar el archivo
            <code class="literal">~/.vim/ftplugin/ruby.vim</code> las siguientes
            líneas:
          </p><pre class="programlisting">
    setlocal shiftwidth=2
    setlocal tabstop=2
    set expandtab   
</pre></div></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="documentaci%C3%B3n"></a>5.3.3.3. Documentación</h5></div></div></div><p>
          Puede aprender por ejemplo con los tutoriales interactivos de
          <a href="https://rubymonk.com" target="_top">https://rubymonk.com</a>
        </p><p>
          En Internet puede ver la referencia oficial de las clases en:
          <a href="http://ruby-doc.org/core-2.1.5/Integer.html" target="_top">http://ruby-doc.org/core-2.1.5/Integer.html</a>
        </p><p>
          Y es buena referencia para Ruby, Rails y Rspec (incluidos
          cambios entre una versión y otra y comentarios) es:
          <a href="http://apidock.com/" target="_top">http://apidock.com/</a>
        </p><p>
          Podrá consultar documentación del núcleo, librería estándar y
          gemas instalando el paquete <code class="literal">ruby-ri_docs</code> y
          ejecutando <code class="literal">ri</code> seguido de la clase (por
          ejemplo <code class="literal">ri Float</code>) o sin parámetro ingresa a
          una consola que da la posibilidad de autocompletar presionando
          Tab (por ejemplo pruebe tecleando <code class="literal">Float</code> y
          después Tab dos veces).
        </p><p>
          También podrá ver la documentación de las gemas en formato
          Rdoc ejecutando:
        </p><pre class="programlisting">
    gem server
</pre><p>
          y con un navegador consultando
          <a href="http://localhost:8808" target="_top">http://localhost:8808</a>
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="uso"></a>5.3.3.4. Uso</h5></div></div></div><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="nueva-aplicaci%C3%B3n-usando-sqlite"></a>5.3.3.4.1. Nueva aplicación usando SQLite</h6></div></div></div><p>
            Genere una nueva aplicación:
          </p><pre class="programlisting">
rails new aplicacion
cd aplicacion
bundle install
</pre><p>
            Esto creará una nueva aplicación de ejemplo e instalará
            todas sus dependencias. Las gemas que no logre instalar por
            falta de permisos, como se explicó anteriormente instalelas
            con <code class="literal">doas gem install</code> y la opción
            <code class="literal">--install-dir /var/www/bundler/</code>
          </p><p>
            Una vez haya logrado que <code class="literal">bundle install</code>
            se ejecute completo puede ejecutar:
          </p><pre class="programlisting">
rails server
</pre><p>
            Tras esto puede ver con un navegador la aplicación en el
            puerto 3000 del computador donde instaló:
            <a href="http://127.0.0.1:3000/" target="_top">http://127.0.0.1:3000/</a>
          </p><p>
            Notará que se generan los siguientes directorios y archivos:
          </p><p>
            Archivo/Directorio Descripción
            ---------------------------------------------------
            -----------------------------------------------------------------------------------
            README.rdoc Documentación en formato Rdoc (puede cambiarse
            por README.md en formato Markdown) Rakefile Tareas para
            <code class="literal">rake</code> (algo análogo a
            <code class="literal">make</code>) config.ru Configurar servidor web
            por usar .gitignore Archivos por ignorar en control de
            versiones Gemfile Gemas requeridas
            app/assets/javascripts/application.js Plantilla de
            Javascript para aplicación
            app/assets/stylesheets/application.css Plantilla de CSS para
            aplicación app/controllers/application_controller.rb
            Plantilla del controlador de la aplicación
            app/helpers/application_helper.rb Ayudas para construir
            vistas (sin lógica del modelos).
            app/views/layouts/application.html.erb Plantilla por defecto
            para el sitio app/assets/ Datos estáticos de la página
            app/assets/images/ Gráficos de la aplicación (tipicamente
            que no se sirven estáticos) app/mailers/ Controlador para
            enviar correos app/models/ Modelos app/channel/ Controlador
            de websockets app/jobs/ Maneja cola de tareas programadas
            app/mailer/ Facilita envío y recepción de correos
            app/controllers/concerns/ Código que se repite en
            controladores app/models/concerns/ Código que se repite en
            modelos bin/bundle Maneja dependencias con el ambiente de la
            aplicación bin/rails Maneja posibilidades de generación y
            controles Rails bin/rake Maneja tareas definidas en
            <code class="literal">Rakefile</code> y <code class="literal">lib/tasks</code>
            bin/setup Plantilla de un configurador de la aplicación
            config/routes.rb Rutas config/application.rb Configura
            aplicación config/environment.rb Configura ambiente
            config/secrets.yml Para verificar integridad de galletas
            firmadas config/environments/development.rb Configuración
            ambiente de desarrollo config/environments/production.rb
            Configuración ambiente de producción
            config/environments/test.rb Configuración ambiente de
            pruebas config/initializers/assets.rb Configura recursos
            config/initializers/backtrace_silencers.rb Inhibe trazas de
            algunas librerías config/initializers/cookies_serializer.rb
            Configura como serializar galletas
            config/initializers/filter_parameter_logging.rb Parametros
            por filtrar (no dejar) en bitácoras
            config/initializers/inflections.rb Inflecciones
            singular/plural config/initializers/mime_types.rb Registra
            tipos MIME config/initializers/session_store.rb Configura
            donde se almacena sesión
            config/initializers/wrap_parameters.rb Configuración para
            ActionController::ParamsWrapper config/locales/en.yml
            Localización en inglés config/boot.rb Prepara rutas para
            encontrar gemas config/database.yml Configuración de base de
            datos config/puma.rb Configuración de servidor web puma
            db/seeds.rb Datos iniciales para base de datos lib/tasks/
            Tareas para <code class="literal">rake</code> lib/assets/
            "Activos" comunes para librerías log/ Bitácoras
            public Archivos estáticos public/404.html Mensaje por
            defecto para páginas no encontradas public/422.html Mensaje
            por defecto para rechazar cambios public/500.html Mensaje
            por defecto cuando ocurren errores en servidor
            public/favicon.ico Icono public/robots.txt Puede evitar
            indexación por parte de motores de búsqueda test/fixtures
            Datos para pruebas test/controllers Pruebas a controladores
            test/mailers Pruebas a controladores de envio de correo
            test/models Pruebas a modelos test/helpers Pruebas a
            funciones para ayudar a construir vistas test/integration
            Pruebas de integración test/test_helper.rb Pruebas funciones
            auxiliares tmp/ Temporales y cache vendor/assets/javascripts
            Fuentes Javascript para código de terceros
            vendor/assets/stylesheets Hojas de estilo para código de
            terceros
          </p><pre class="programlisting">
: Archivos generados
</pre></div><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="generar-un-recurso"></a>5.3.3.4.2. Generar un recurso</h6></div></div></div><p>
            Puede crear un primer recurso (digamos
            <code class="literal">Departamento</code>) con modelo, controlador
            simple y vistas para operaciones CRUD y RESTful con:
          </p><pre class="programlisting">
    rails g scaffold Departamento nombre:string{500} latitud:float longitud:float fechadeshabilitacion:date
    rake db:migrate
</pre><p>
            Tras esto y volver a iniciar el servidor (más breve con
            <code class="literal">rails s</code>) podrá realizar las operaciones
            básicas sobre departamentos desde:
            <a href="http://127.0.0.1:3000/departamentos/" target="_top">http://127.0.0.1:3000/departamentos/</a>
          </p><p>
            El <code class="literal">scaffold</code> genera tablas (con una
            migración), modelo, controlador, vistas y rutas iniciales
            que con una interfaz muy simple le permitirán listar
            departamentos, ver detalles de cada uno, crear nuevos,
            editar existentes y eliminar.
          </p><p>
            Los archivos generados son:
          </p><pre class="programlisting">
Archivo/Directorio                                    Descripción
----------------------------------------------------- ----------------------------------------------
`db/migrate/20160320131555_create_departamentos.rb`   Migración para crear tabla
`app/models/departamento.rb`                          Modelo
`test/models/departamento_test.rb`                    Prueba al modelo
`test/fixtures/departamentos.yml`                     Datos para pruebas
`app/controllers/departamentos_controller.rb`         Controlador
`app/views/departamentos`                             Vistas
`app/views/departamentos/index.html.erb`              Lista de departamentos
`app/views/departamentos/edit.html.erb`               Formulario para editar
`app/views/departamentos/show.html.erb`               Muestra un departamento
`app/views/departamentos/new.html.erb`                Nuevo departamento
`app/views/departamentos/_form.html.erb`              Formulario usado por `edit` y `new`
`test/controllers/departamentos_controller_test.rb`   Pruebas al controlador
`app/helpers/departamentos_helper.rb`                 Funciones auxiliares para construir vistas
`app/views/departamentos/index.json.jbuilder`         Lista en JSON
`app/views/departamentos/show.json.jbuilder`          Muestra un departamento en JSON
`app/assets/javascripts/departamentos.coffee`         Donde agregar código Coffescript para vistas
`app/assets/stylesheets/departamentos.scss`           Para poner CSS de las vistas
`app/assets/stylesheets/scaffolds.scss`               Para poner CSS de las vistas

: Archivos generados con scaffold

Por convención de Ruby on Rails:

-   Las fuentes del módelo quedan en ```app/models/departamento.rb ``` 
-   El nombre de la tabla será la forma plural del nombre del módelo
</pre><p>
            (e.g <code class="literal">departamentos</code>) - La tabla incluirá
            automáticamente un campo id de tipo entero que se
            autoincrementa - La tabla incluirá automáticamente los
            campos <code class="literal">created_at</code> y
            <code class="literal">updated_at</code> de tipo
            <code class="literal">datetime</code> . - La tabla será creada con una
            migración (cuya fuente quedará en
            <code class="literal">db/migrate/</code>) y el registro de las
            migraciones ya aplicadas se lleva en una tabla
            <code class="literal">schema_migrations</code> creada automáticamente
            en la base de datos.
          </p></div><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="p%C3%A1gina-de-inicio"></a>5.3.3.4.3. Página de inicio</h6></div></div></div><pre class="programlisting">
La página inicial de su aplicación puede crearla generando un
controlador con vista, modificando la vista y especificando la ruta:
```
rails g controller hogar
```             

Que genera:

Archivo/Directorio                            Descripción
--------------------------------------------- ----------------------------------------
`app/controllers/hogar_controller.rb`         Controlador
`app/views/hogar`                             Vistas relacionadas con el controlador
`test/controllers/hogar_controller_test.rb`   Pruebas
`app/helpers/hogar_helper.rb`                 Funciones auxiliares para vistas
`app/assets/javascripts/hogar.coffee`         Coffescript para vistas
`app/assets/stylesheets/hogar.scss`           CSS para vistas

: Archivos generados con `g controller hogar`

Modifique el controlador `app/controllers/hogar_controller.rb` para
indicar que tendrá un vista `index`:
```             
class HogarController &lt; ApplicationController
def index
end
end
</pre><pre class="programlisting">

Cree la vista `app/views/hogar/index.html.erb`:
</pre><pre class="programlisting">
&lt;article&gt;
&lt;h1&gt;Mi aplicación&lt;/h1&gt;
&lt;para&gt; Manejar &lt;a href="/departamentos"&gt;Departamentos&lt;/a&gt;&lt;/para&gt;
&lt;/article&gt;
</pre><pre class="programlisting">

Y en el archivo de configuración de rutas `config/routes.rb` añada:
</pre><pre class="programlisting">
root "hogar#index"
</pre><pre class="programlisting">

Al modificar fuentes en general no necesita volver a lanzar el servidor
de rails, pero si modifica `config/routes.rb` o cualquier archivo fuera
del directorio `app` debe reiniciar el servicio.

Examine desde un navegador &lt;http://127.0.0.1:3000/&gt;. Verá lo que
escribió en `app/views/hogar/index.html.erb` en el ambiente HTML que
tenga diseñado en `app/views/layouts/application.html.erb`.

##### Interacción con la base de datos

Puede examinar la tabla creada e interactuar con la base de datos con la
interfaz texto de SQLite como se ejemplifca a continuación:
</pre><pre class="programlisting">
$ rails dbconsole
sqlite&gt; .schema
CREATE TABLE "departamentos" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "nombre"
varchar(500), "latitud" float, "longitud" float, "created_at" datetime, "updated_at" datetime);
CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL);
CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version"
);
</pre><pre class="programlisting">

##### Ayudas para usar una base de datos PostgreSQL existente:

Se recomienda emplear UTF8 como codificación de PostgreSQL (si emplea
otra codificación convierta sacando un respaldo eliminando la base,
volviendola a crear con `-E UTF8` y restaurando los datos).

-   Arregle la aplicación recién creada para que emplee PostgreSQL,
    modificando parámetros de base de datos en
    `config/database.yml`. Si crea una nueva aplicación:
</pre><pre class="programlisting">
    cd ..
    rails new prueba1 --database=postgresql
</pre><pre class="programlisting">

-   Si lo requiere en otra terminal cree un usuario para la base de
    datos que será el que empleará desde su aplicación ruby:
</pre><pre class="programlisting">
     doas su - _postgresql 
    $ createuser -Upostgres -h/var/www/tmp prueba
    Shall the new role be a superuser? (y/n) n 
    Shall the new role be allowed to create databases? (y/n) y
    Shall the new role be allowed to create more new roles? (y/n) n 
    $ psql -h/var/www/tmp -Upostgres psql (9.3.6) Type "help" for help.
    postgres=# ALTER USER prueba1 WITH password 'miclave'; ALTER ROLE postgres=# $ exit
</pre><pre class="programlisting">

-   Vuelva a las fuentes de la aplicación y modifique los parámetros de
    la base de datos editando
    ```conf/database.ym```l
    Ponga el usuario recién creado, la clave y en la especificación de
    cada una de las 3 bases de datos (desarrollo, pruebas y producción)
    agregue la ruta de la conexión al motor de bases de datos:
        ```host: /var/www/tmp/```
                    

-   A manera de prueba de su configuración intente ingresar a un
    interprete de comandos para su base de datos con:
</pre><pre class="programlisting">
    rails dbconsole
</pre><pre class="programlisting">

-   Si las tablas de la base de datos no emplean la convención para
    nomenclatura de Ruby on Rails (nombres de tabla en plural, clases en
    singular) agregue al archivo ```config/environment.rb```:
</pre><pre class="programlisting">
    ActiveRecord::Base.pluralize_table_names=false
</pre><pre class="programlisting">

    Además de esto para que las pruebas puedan operar seguramente deberá
    renombrar los archivos con datos de prueba del directorio ```tests/fixtures```
    , y en lugar de dejar forma plural dejar forma singular. Si el
    nombre de tabla es muy diferente en el modelo puede usar ```self.table_name = "cc"```
    como se indica en {8}.
-   Para generar un volcado inicial de la base de datos en ```db/structure.sql```
    (incluyendo características no portables de PostgreSQL a otros
    motores de bases de datos), agregue al archivo ```config/application.rb```
    la línea
</pre><pre class="programlisting">
   config.active_record.schema_format=:sql
</pre><pre class="programlisting">
    y después ejecute la tarea rake apropiada (ver {4}):
</pre><pre class="programlisting">
    rake db:structure:dump
</pre><pre class="programlisting">

-   Genere clases (módelos) en blanco en el directorio ```app/models```
    para cada una de las tablas de su aplicación, por ejemplo para la
    tabla ```mitabla``` :
</pre><pre class="programlisting">
    rails generate model mitabla --migration=false --timestamp=false
</pre><pre class="programlisting">

-   Cuando la aplicación esté en operación ActiveRecord tomará la
    estructura directamente de la base de datos, no de los modelos en
    sus fuentes. Sin embargo puede ser útil poner comentarios en esos
    modelos con los campos de cada tabla. Esto puede hacerse instalando
    la gema ```annotate``` con
</pre><pre class="programlisting">
doas gem install annotate
</pre><pre class="programlisting">
    y ejecutando:
</pre><pre class="programlisting">
    annotate
</pre><pre class="programlisting">

-   Si desea ayuda en la generación de controladores y vistas para sus
    tablas, instale `doas gem install `schema_to_scaffold``, 
    genere (puede ser momentaneamente) el archivo `db/schema.rb`
    con
</pre><pre class="programlisting">
rake db:schema:dump
</pre><pre class="programlisting">
    y ejecute
</pre><pre class="programlisting">
scaffold
</pre><pre class="programlisting">
   para ver las instrucciones que debe dar a rails para generar
    modelos, controladores y vistas para las tablas de la base de datos.

##### Detalles para tener en cuenta al migrar aplicaciones

RoR tiene sus propias convenciones respecto a SQL, nombres de tablas y
demás, en ocasiones puede ser mejor intercambiar datos JSON con una
aplicación ya existente que interactúe con la base de datos. Sin embargo
si desea emplear RoR tanto como pueda para interactuar con la base de
datos, tenga en cuenta:

-   Toda tabla creada y maneja por RoR se espera que tenga los campos
    ```created_at``` y ```updated_at``` de tipo ```datetime```
    . Puede generar una migración que agregue estos campos digamos para
    la tabla `intervalo` con
</pre><pre class="programlisting">
rails g migration addTiempoToIntervalo created_at:datetime
updated_at:datetime
</pre><pre class="programlisting">
    tras lo cual debe editar la migración creada para asegurar que queda
    bien (por ejemplo pasando a singular la tabla si ese es su caso).
-   Por defecto cada tabla debe tener una única llave primaria de nombre
    `id` y tipo entero autoincremental. Esto puede cambiarse un poco --pero
    no del todo según {6}-- la sugerencia allí dada es definir la llave
    primaria en SQL en la migración, la cual debe incluir
    `id:false` y en el modelo agregar 
    `self.primary_key=:campo_llave_primaria`. Por ejemplo si la llave 
    primaria de una tabla usuario debe ser `id` pero de tipo
    `string` , la migración será:
</pre><pre class="programlisting">
    create_table "usuario", id: false, force: true do |t| 
      t.string "id", limit: 15, null: false 
      t.string "nombre", limit: 50 ... 
      t.datetime "created_at" 
      t.datetime "updated_at" 
    end
    add_index "usuario", ["id"], name: "index_usuario_on_id", 
    unique: true, using: :btree
</pre><pre class="programlisting">
    Y en el modelo `app/models/usuario.rb` debe quedar:
</pre><pre class="programlisting">
    class Usuario &lt; ActiveRecord::Base
      ...
      self.primary_key=:id
    end
</pre><pre class="programlisting">
-   Aunque es posible insertar datos iniciales para algunas tablas en
    `db/seeds.rb`, los métodos por defecto de RoR emplearán un campo 
    autoincremental para la identificación, puede insertarse directamente en 
    SQL, como se explica en {7}, con:
</pre><pre class="programlisting">
    connection = ActiveRecord::Base.connection()
    connection.execute("INSERT INTO mitabla(id, nombre) VALUES ('id1', 'nom1')")
</pre><pre class="programlisting">

##### 4.3 Localización

Si su público objetivo habla principalmente español puede:

-   Instalar la gema `rails-i18n` que incluye traducción a 
    español y otros idiomas de varias cadenas de Ruby on Rails
</pre><pre class="programlisting">
   doas gem install rails-i18n
</pre><pre class="programlisting">

-   Agregar
</pre><pre class="programlisting">
gem "rails-i18n"
en su archivo
Gemfile
</pre><pre class="programlisting">
    y ejecutar
</pre><pre class="programlisting">
    bundle update
</pre><pre class="programlisting">

-   Configurar en `config/application.rb` :
</pre><pre class="programlisting">
    config.time_zone = 'America/Bogota'
    config.i18n.default_locale = :es
</pre><pre class="programlisting">

-   Eventualmente corregir inflexiones singular/plural 
    en `config/initializers/inflections.rb`, por ejemplo (ver {3}):
</pre><pre class="programlisting">
    ActiveSupport::Inflector.inflections do |inflect|
      inflect.irregular 'pais', 'paises'
    end
</pre><pre class="programlisting">

#### Depuración

Como se explica en {5}, desde la aplicación en rails puede entrar a
depurar:

-   Instale la gema
</pre><pre class="programlisting">
gem install byebug
</pre><pre class="programlisting">
-   Para activar el depurador en sitios en producción debe además
    inicar el servidor web con
</pre><pre class="programlisting">
rails s --debugger
</pre><pre class="programlisting">
-   En el sitio de las fuentes donde quiere comenzar a depurar
    llamando la función
</pre><pre class="programlisting">
byebug
</pre><p>
            ```
          </p><p>
            Ruby también ofrece facilidades para medir tiempos como se
            resume en {4}.
          </p></div></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="referencias"></a>5.3.3.5. Referencias</h5></div></div></div><div class="itemizedlist"><ul type="disc" compact><li><p>
              {1} http://guides.rubyonrails.org/getting_started.html
            </p></li><li><p>
              {2}
              http://stackoverflow.com/questions/7092107/rails-3-1-error-could-not-find-a-javascript-runtime
            </p></li><li><p>
              {3}
              http://stackoverflow.com/questions/5285048/rails-3-routing-singular-option
            </p></li><li><p>
              {4} http://www.caliban.org/ruby/rubyguide.shtml
            </p></li><li><p>
              {5}
              http://guides.rubyonrails.org/debugging_rails_applications.html
            </p></li><li><p>
              {6}
              http://stackoverflow.com/questions/1200568/using-rails-how-can-i-set-my-primary-key-to-not-be-an-integer-typed-column
            </p></li><li><p>
              {7}
              http://stackoverflow.com/questions/6223803/execute-sql-script-inside-seed-rb-in-rails3
            </p></li><li><p>
              {8}
              http://stackoverflow.com/questions/7542976/add-timestamps-to-an-existing-table
            </p></li><li><p>
              {9}
              http://stackoverflow.com/questions/4613574/how-do-i-explicitly-specify-a-models-table-name-mapping-in-rails
            </p></li></ul></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="java"></a>5.3.4. Java</h4></div></div></div><p>
        Desde OpenBSD 4.7 se incluyó un porte oficial de Java de fuentes
        abiertas, se trata del <code class="literal">jdk-1.7</code>.
      </p><p>
        Si requiere versiones anteriores de Java o si requiere el plugin
        para Firefox deberá compilar una versión anterior.
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="compilacion"></a>5.3.4.1. Compilación de JDKs de fuentes cerradas</h5></div></div></div><p>
          Las versiones anteriores a la 1.7, deben compilarse como
          portes (de subdirectorios de
          <code class="literal">/usr/ports/devel/jdk/</code>), pues las licencias
          de las fuente exigen que al descargar de las mismas las haga
          directamente de los sitios de distribución. Al intentar
          compilar cada uno podrá ver instrucciones que le indican de
          donde descargar las fuentes para ubicarlas en
          <code class="literal">/usr/ports/distfiles</code>.
        </p><p>
          Tras descargar manualmente las fuentes, la compilación e
          instalación son directas (i.e con <code class="literal">make</code> y
          <code class="literal">make install</code> respectivamente). Tenga en
          cuenta que los portes del jdk para su compilación requieren
          que la capa de emulación de Linux esté activada (ver
          ???).
        </p><p>
          Si por ejemplo instala <code class="literal">jdk-1.4</code> los binarios
          quedarán en <code class="literal">/usr/local/jdk1.4/bin/</code> así que
          es recomendable que agregue tal ruta a su variable
          <code class="literal">PATH</code> por ejemplo en su archivo
          <code class="literal">~/.profile</code> o el equivalente.
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="plugin-java"></a>5.3.4.2. Plugin de Java para Mozilla y Firefox</h5></div></div></div><p>
          El <code class="literal">jdk-1.4</code> incluye un plugin que puede
          emplearse con <code class="literal">mozilla</code> o
          <code class="literal">mozilla-firefox</code>. Basta ejecutar:
        </p><pre class="programlisting">
    cd  ~/.mozilla
    mkdir plugins
    cd plugins
    ln -s /usr/local/jdk-1.4.2/jre/plugin/i386/ns610/libjavaplugin_oji.so .
</pre><p>
          después reiniciar <code class="literal">mozilla-firefox</code> y
          verificar que el plugin esté operando abriendo el URL
          <code class="literal">about:plugins</code>. Como se indica en
          http://archives.neohapsis.com/archives/openbsd/2005-09/2253.html,
          para que puedan cargarse applets es necesario aumentar el
          límite de memoria para datos con algo como:
        </p><pre class="programlisting">
    ulimit -d 2000000
</pre><p>
          que de requerirse puede ejecutarse desde la cuenta root (cuyo
          límite máximo es mayor que el de cuentas de usuario).
        </p></div></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp2753706800" href="#idp2753706800">10</a>] </sup>
              Si usa <code xmlns="" class="literal">ksh</code> puede ver una lista de
              posibles programas que le permitan imprimir, tecleando
              <code xmlns="" class="literal">dvi</code> desde un intérprete de comandos y
              presionando Tab dos veces.
            </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="configuracion-de-componentes-basicos.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="conf-dispositivos.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">4. Configuración y uso de programas y servicios básicos </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 6. Configuración y uso de algunos dispositivos y servicios</td></tr></table></div></body></html>
