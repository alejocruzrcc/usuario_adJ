<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>4. Configuración y uso de programas y servicios básicos</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="up" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="prev" href="paquetes-y-portes.html" title="3. Paquetes y portes"><link rel="next" href="configuracion-de-algunos-portes.html" title="5. Configuración y uso de algunas aplicaciones"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4. Configuración y uso de programas y servicios básicos</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="paquetes-y-portes.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="configuracion-de-algunos-portes.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuracion-de-componentes-basicos"></a>4. Configuración y uso de programas y servicios básicos</h2></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="pdksh"></a>4.1. pdksh (ksh)</h3></div></div></div><p> Es un interprete de comandos similar a
	<span><strong class="command">bash</strong></span>. Este interprete de comandos al iniciarse 
	como interprete de login lee los archivos 
	<code class="filename">/etc/profile</code> y 
	<code class="filename">$HOME/.profile</code>, pero no lo hace si es
	iniciado como interprete interactivo.  Puede iniciarse
	explícitamente como interprete de login con <span><strong class="command">ksh -l</strong></span>.
	Esto puede resultar útil para iniciarlo por ejemplo dentro de
	<span><strong class="command">xterm</strong></span>:
	  </p><pre class="screen">
	xterm -en utf8 -e /bin/ksh -l </pre><p>
     </p><p>
	El método de edición (<code class="literal">vi</code>,<code class="literal">emacs</code> o 
	<code class="literal">gmacs</code>) se configura en la variable 
	<code class="literal">VISUAL</code>.
      </p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="ftp"></a>4.2. ftp</h3></div></div></div><p>Además de las características usuales de un cliente 
	      <span><strong class="command">ftp</strong></span>
	      (RFC 959, extendido en RFC 1123), el cliente 
	      <span><strong class="command">ftp</strong></span> de OpenBSD:
      </p><div class="itemizedlist"><ul type="disc"><li><p>Realiza conexiones pasivas por defecto. Sin embargo algunos 
	    servidores de ftp requiere conexiones activas, si ese es el caso 
	    (por ejemplo cuando el servidor responde a <code class="literal">ls</code>
	    con <code class="literal">425 Can't open data connection</code>) emplee 
	    la opción <code class="option">-A</code>.
	    
	  </p></li><li><p>Emplea el archivo de configuración
	    <code class="filename">~/.netrc</code> para establecer conexiones
	    automáticamente.  En ese archivo usted puede especificar 
	    servidores a los que suele conectarse (y por ejemplo emplear
	    redireccionamiento para automatizar operaciones .  Este archivo puede tener comentarios
	    (líneas iniciadas con el caracter '#') o líneas como:
	    </p><pre class="screen">
	machine Jesus.miescuela.edu.co login pablo
	machine rt.fm login anonymous passwd pablo@miescuela.edu.co
	    </pre><p>
	    que indican emplear el usuario pablo al conectarse a Jesus.miescuela.edu.co
	    (pedirá la clave al hacer la conexión) y emplear el usuario
	    <code class="literal">anonymous</code>, con clave 
	    <code class="literal">pablo@miescuela.edu.co</code> al hacer conexiones con
	    <code class="literal">rt.fm</code>.
	    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="./warning.png"></td><th align="left">Aviso</th></tr><tr><td align="left" valign="top"><p>Las claves que se almacenan en este archivo son
	      textos planos que el superusuario del sistema podría ver.
	      Para que otros usuarios no puedan verlas quite el permiso
	      de lectura para otros usuarios y para el grupo:
	      </p><pre class="screen">
	chmod og-r ~/.netrc
	      </pre><p>
	      .</p></td></tr></table></div></li><li><p>Permite especificar el URL (iniciado con 
	      <code class="literal">http://</code> o <code class="literal">ftp://</code>) de
	      un archivo por descargar en la línea de comandos (y 
	      realiza autenticación automática si es ftp:// y se ha 
	      configurado <code class="filename">~/.netrc</code>, o si el URL
	      es análogo a
	      <code class="literal">ftp://pablo:miclave@Jesus.miescuela.edu.co/pub/doc.txt</code>).  
	      En este caso si se requiere puede emplearse la opción 
	      <code class="option">-o</code> seguida del nombre del archivo con el 
	      que se desea salvar el archivo transmitido.  También puede
	      emplearse <code class="literal">*</code> para indicar transmisión de 
	      varios archivos.
	    </p></li></ul></div><p>
      </p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="doas"></a>4.3. doas</h3></div></div></div><p>
Este programa permite ejecutar comandos privilegiados a
algunos usuarios.
A partir de adJ y OpenBSD 5.8 el sistema base incluye <code class="literal">doas</code> 
como remplazo del antiguo <code class="literal">sudo</code>. <code class="literal">doas</code>
es más simple y fácil de auditar.
	</p><p>
Se configura en <code class="filename">/etc/doas.conf</code>.  Un ejemplo mínimo es:
</p><pre class="screen">
	permit nopass keepenv :wheel
</pre><p>
que permitirá su uso sin requerir clave a todos los usuarios del grupo
<code class="literal">wheel</code> manteniendo las varibles de ambiente.

	</p><p>
Una vez configurado, puede ejecutar un comando privilegiado
desde una cuenta configurada con
<span><strong class="command">doas <em class="replaceable"><code>comando</code></em></strong></span>.
Por ejemplo:
</p><pre class="screen">
	doas vi /etc/rc.conf.local 
</pre><p>
	</p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="sudo"></a>4.3.1. sudo</h4></div></div></div><p>
El programa <code class="literal">sudo</code> se mantiene como paquete, 
si lo requiere instalelo con:
</p><pre class="screen">
	pkg_add sudo
</pre><p>
		</p><p>   
Se configura en <code class="filename">/etc/sudoers</code> que debe editarse con
<span><strong class="command">visudo</strong></span>.
		</p><p> 
Consulte los ejemplos allí presentados
en líneas con comentarios y quite el comentario a la configuración
que considere apropiada.  Por ejemplo si desea que todo usuario
que esté en el grupo <code class="literal">wheel</code> pueda emplear 
<span><strong class="command">sudo</strong></span> sin necesidad de ingresar una clave,
quite el comentario a la línea:
</p><pre class="screen">
	%wheel  ALL=(ALL)       NOPASSWD: ALL
</pre><p>
		</p><p>
Puede verse en <a href="http://rr.sans.org/authentic/sudo.php" target="_top">http://rr.sans.org/authentic/sudo.php</a> 
interacción 
entre <span><strong class="command">sudo</strong></span> y <span><strong class="command">ssh</strong></span> para 
administrar una red.
		</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="cron"></a>4.4. <code class="literal">cron</code>: para programar tareas</h3></div></div></div><p>El programa <code class="literal">cron</code>  ejecuta tareas
		configuradas para correr en cierto(s) momento(s).
		Este servico debe correr permanentemente.
		Puede comprar que opera con <span><strong class="command">pgrep cron</strong></span> que
		debe responder con el número del proceso.  Si no está
		corriendo debe ejecutarlo urgentemente bien reiniciando el
		servido o ejecutando <code class="literal">doas cron</code>.
	</p><p>Cada minuto el programa <code class="literal">cron</code> busca
		tareas cuya ejecución esté pendiente.  
       	</p><p>
      </p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="ld"></a>4.5. ld</h3></div></div></div><p><span><strong class="command">ld</strong></span> es el programa que carga otros programas
	junto con las librerías compartidas que requieran y resuelve los
	símbolos.  Para buscar librerías compartidas emplea la información
	de <code class="filename">/var/run/ld.so.hints</code> (que puede examinarse
	con <span><strong class="command">ldconfig -r</strong></span>).</p><p>Con <code class="literal">ldd</code> pueden examinarse las librerías
	compartidas que un programa requiere, por ejemplo:
	</p><pre class="screen">
	ldd /usr/bin/less
	</pre><p>
      </p><p>Cuando se agregan librerías
	compartidas o se requiere que las librerias de nuevos directorios 
	sean referenciados en <code class="filename">/var/run/ld.so.hints</code> puede 
	ejecutar <span><strong class="command">ldconfig</strong></span> (que por defecto busca nuevas
	librerías en <code class="filename">/usr/lib</code>).  Por ejemplo durante 
	el arranque en un sistema con X-Window se ejecuta:
	</p><pre class="screen">
	ldconfig /usr/local/lib /usr/X11R6/lib
	</pre><p>
	También pueden especificarse otros directorios por usar durante el
	arranque definiendo la variable <code class="varname">shlib_dirs</code> en
	<code class="filename">/etc/rc.conf.local</code> (ver <a href="sobre-la-instalacion.html#inicio-del-sistema" title="2.5. Inicio del sistema">Sección 2.5, “Inicio del sistema”</a>)
      </p><p>Incluso un usuario puede establecer otros directorios donde
	      buscar librerías compartidas especificandolos en la variable de
	      entorno <code class="literal">LD_LIBRARY_PATH</code> (separar un directorio
	      de otro con ':' ).
      </p></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="kernel"></a>4.6. Kernel</h3></div></div></div><p>Algunas configuraciones pueden hacerse con 
	      <span><strong class="command">sysctl</strong></span>, otras MUY inusuales requieren 
	      recompilación del kernel.
      </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="compilacion-del-kernel"></a>4.6.1. Compilación del kernel</h4></div></div></div><p>Puede sacar las fuentes del CD de instalación o
		de un repositorio FTP (<code class="filename">src.tgz</code>)
	  descomprimiendolas en <code class="filename">/usr/src</code>, después
	  puede actualizarlas con el CVS de OpenBSD con:
	  </p><pre class="screen">
	cd /usr
	export CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs
	cvs -z3 co -rOPENBSD_5_9 -P src </pre><p>
	empleando un espejo más cercano a su computador y cambiado
	OPENBSD_5_9 por la versión que desea actualizar, 
	o si las fuentes que tiene son la versión que desea puede emplear:
	</p><pre class="screen">
	cd /usr/src
	export CVSROOT=anoncvs@anoncvs.de.openbsd.org:/cvs
	cvs -z3 update -r OPENBSD_5_9 -Pd </pre><p>
	</p><p>Tal como se describe en <span><strong class="command">man afterboot</strong></span>,
	  para compilar basta editar el archivo de configuración del
	  kernel que se desea, después ejecutar 
	  <span><strong class="command">config</strong></span>, cambiar al directorio donde se
	  compila y compilar.  Por ejemplo:
	  </p><pre class="screen">
	cd /usr/src/sys/arch/amd64/conf
	vi GENERIC
	config GENERIC
	cd ../compile/GENERIC
	make clean
	make depend
	make
	  </pre><p>
	  con esto se generará el ejecutable <code class="filename">bsd</code> en
	  el directorio de compilación, tal ejecutable puede usarse para 
	  reemplazar
	  <code class="filename">/bsd</code>, eventualmente dejando el kernel
	  anterior listo para un arranque de emergencia:
	  </p><pre class="screen">
	mv /bsd /bsd.old
	mv bsd /bsd
	  </pre><p>
	</p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="syslog"></a>4.7. syslog</h3></div></div></div><p><span><strong class="command">syslogd</strong></span> es un servidor que recibe mensajes
    de depuración y trazas de diversos programas.
    Su archivo de configuración es <code class="filename">/etc/syslog.conf</code>,
    cada línea de este archivo especifica que hacer con los mensajes
    recibidos por uno o más programas.
  </p><p>Tras modificar <code class="filename">/etc/syslog.conf</code> puede
    obligarse a <span><strong class="command">syslogd</strong></span> a leerlo de nuevo enviado
    la señal HUP, por ejemplo: </p><pre class="screen">
# ps ax | grep syslogd
7723 ??  Is      0:00.06 syslogd 
# kill -HUP 7723
    </pre><p>
  </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-syslog"></a>4.7.1. Referencias y lecturas recomendadas</h4></div></div></div><p>
      Las siguientes páginas man:
      <a href=""><span class="citerefentry"><span class="refentrytitle">syslog.conf</span>(8)</span></a>,
      <a href=""><span class="citerefentry"><span class="refentrytitle">syslog</span>(3)</span></a>,
      <a href=""><span class="citerefentry"><span class="refentrytitle">syslogd</span>(8)</span></a> y
      <a href=""><span class="citerefentry"><span class="refentrytitle">logger</span>(1)</span></a>.
    </p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="zona-horaria"></a>4.8. Zona Horaria</h3></div></div></div><p>
	    La zona horaria se establece enlazando 
	    <code class="filename">/etc/localtime</code> con una de las zonas del 
	    directorio <code class="filename">/usr/share/zoneinfo</code>, por ejemplo
	    </p><pre class="screen">
doas ln -s /usr/share/zoneinfo/America/Bogota /etc/localtime
	    </pre><p>
	</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="paquetes-y-portes.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="configuracion-de-algunos-portes.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">3. Paquetes y portes </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 5. Configuración y uso de algunas aplicaciones</td></tr></table></div></body></html>
